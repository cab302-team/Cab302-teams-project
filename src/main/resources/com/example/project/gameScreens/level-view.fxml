<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.project.controllers.gameScreens.LevelController"
            stylesheets="@level-styles.css">

    <!-- Background image fills everything -->
    <ImageView fitHeight="1080" fitWidth="1920" layoutX="0" layoutY="0" pickOnBounds="true" preserveRatio="false">
        <image>
            <Image url="@backgroundImage.png" />
        </image>
    </ImageView>

    <!-- Tile stand image -->
    <ImageView fitHeight="800" fitWidth="800" layoutX="602.0" layoutY="686.0" mouseTransparent="true" pickOnBounds="true" preserveRatio="true">
        <image>
            <Image url="@tileStand.png" />
        </image>
    </ImageView>

    <!-- Tile rack image -->
    <ImageView fitHeight="148.0" fitWidth="769.0" layoutX="640.0" layoutY="464.0" mouseTransparent="true" pickOnBounds="true" preserveRatio="true">
        <image>
            <Image url="@tileRack.png" />
        </image>
    </ImageView>

    <!-- Tile rack rectangle -->
    <ImageView fitHeight="95.0" fitWidth="658.0" layoutX="653.0" layoutY="488.0" mouseTransparent="true" pickOnBounds="true" preserveRatio="true">
        <image>
            <Image url="@tileRackRectangle.png" />
        </image>
    </ImageView>

    <center>
        <StackPane>
            <AnchorPane prefHeight="1080" prefWidth="1920">

                <!-- Game Areas -->
                <VBox alignment="CENTER" layoutX="668.0" layoutY="506.0" spacing="248">
                    <HBox fx:id="wordViewHBox" spacing="10" />
                    <HBox fx:id="tileRackContainer" spacing="20" />
                    <HBox alignment="CENTER" spacing="40" />
                </VBox>

                <!-- Sidebar -->
                <VBox alignment="TOP_CENTER" prefHeight="1080.0" prefWidth="429.0" spacing="20" styleClass="left-panel">
                    <Label prefHeight="86.0" prefWidth="187.0" styleClass="score-header" text="To Beat!" />
                    <Label fx:id="scoreToBeatLabel" prefHeight="63.0" prefWidth="186.0" styleClass="score-box" text="9,999,999" />
                    <Separator />
                    <Label prefHeight="86.0" prefWidth="212.0" styleClass="score-header" text="Your Score" />
                    <Label fx:id="currentScoreLabel" prefHeight="76.0" prefWidth="189.0" styleClass="your-score-box" text="0" />
                    <Label prefHeight="68.0" prefWidth="153.0" styleClass="score-header" text="Combo" />
                    <HBox alignment="CENTER" prefHeight="55.0" prefWidth="332.0" spacing="8" styleClass="combo-box">
                        <Label fx:id="comboCountLabel" styleClass="combo-bubble-blue" text="1" />
                        <Label styleClass="combo-x" text="×" />
                        <Label fx:id="comboMultiplierLabel" styleClass="combo-bubble-red" text="2" />
                    </HBox>
                </VBox>

                <!-- Top bar -->
                <VBox layoutX="840" layoutY="120" spacing="10">
                    <Label styleClass="heading" text="Level 1" />
                    <HBox fx:id="upgradeTileRackAtTop" alignment="CENTER" spacing="10" />
                </VBox>

                <!-- Dev Button -->
                <Button layoutX="935.0" layoutY="742.0" onAction="#onSkipButton" text="(Dev only) Skip to shop" />

                <!-- Plays -->
                <VBox alignment="CENTER" layoutX="857.0" layoutY="633.0" spacing="5" styleClass="control-container">
                    <Label styleClass="control-label" text="Plays" />
                    <HBox alignment="CENTER" spacing="10">
                        <Label fx:id="playsLeftLabel" styleClass="control-number" text="9" />
                        <Button fx:id="playButton" onAction="#onPlayButton" styleClass="circle-button" text="▶" />
                    </HBox>
                </VBox>

                <!-- Redraws -->
                <VBox alignment="CENTER" layoutX="1022.0" layoutY="633.0" spacing="5" styleClass="control-container">
                    <Label styleClass="control-label" text="Redraws" />
                    <HBox alignment="CENTER" spacing="10">
                        <Label fx:id="redrawsLeftLabel" styleClass="control-number" text="9" />
                        <Button fx:id="redrawButton" onAction="#onRedrawButton" styleClass="circle-button" text="⟳" />
                    </HBox>
                </VBox>

                <!-- Sound and Customise -->
                <HBox layoutX="1420" layoutY="40" spacing="10" alignment="CENTER">
                    <Button text="Sound" styleClass="menu-button">
                        <graphic>
                            <ImageView fitHeight="16" fitWidth="16">
                                <image>
                                    <Image url="@audioImage.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    <Button text="Customise" styleClass="menu-button" />
                </HBox>

            </AnchorPane>

            <!-- Redraw container overlays at bottom-right and is animated -->
            <VBox fx:id="redrawContainer"
                  alignment="BOTTOM_CENTER"
                  maxHeight="-Infinity" maxWidth="-Infinity"
                  minHeight="-Infinity" minWidth="-Infinity"
                  prefHeight="347.0" prefWidth="150.0"
                  translateX="200.0"
                  StackPane.alignment="BOTTOM_RIGHT"
                  spacing="10.0">
                <StackPane.margin>
                    <Insets bottom="50.0" right="20.0"/>
                </StackPane.margin>
                <Button fx:id="confirmRedrawButton"
                        onAction="#onConfirmRedrawButton"
                        text="Confirm Redraw"
                        styleClass="control-button"/>
            </VBox>

        </StackPane>
    </center>

</BorderPane>