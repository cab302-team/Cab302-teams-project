<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SidebarController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Project</a> &gt; <a href="index.source.html" class="el_package">com.example.project.controllers.gameScreens</a> &gt; <span class="el_source">SidebarController.java</span></div><h1>SidebarController.java</h1><pre class="source lang-java linenums">package com.example.project.controllers.gameScreens;

import com.example.project.models.gameScreens.LevelModel;
import com.example.project.services.Session;
import javafx.fxml.FXML;
import javafx.scene.control.Label;
import javafx.scene.layout.Pane;

/**
 * The sidebar on shop and level with the current round info.
 */
<span class="nc" id="L12">public class SidebarController</span>
{
    @FXML
    Pane root;

    /**
     * This runs after the constructor and after all @FXML fields are initialized once each time application opened.
     */
    @FXML
    private Label moneyLabel;

    @FXML private Label playsLeftLabel;

    @FXML private Label redrawsLeftLabel;

    @FXML Label scoreToBeatLabel;
    @FXML Label currentScoreLabel;
    @FXML Label rawPoints;
    @FXML Label multiplier;

    private LevelModel levelModel;


    // TODO: actually also need to bind plays, redraws or pass from level controller. since shop could change those? So probably put plays redraws in session skip getting them from level.
    public void bindMoney(){
<span class="nc" id="L37">        moneyLabel.textProperty().bind(</span>
<span class="nc" id="L38">                Session.getInstance().getMoneyProperty().asString(&quot;Funds: $%d&quot;)</span>
        );
<span class="nc" id="L40">    }</span>

    /**
     * Setup sync able properties.
     * @param levelModel level model.
     */
    public void setupProperties(LevelModel levelModel)
    {
<span class="nc" id="L48">        this.levelModel = levelModel;</span>
        // Binds the money display to Session money property for automatic updates
<span class="nc" id="L50">        bindMoney();</span>

<span class="nc" id="L52">        this.levelModel.wordPointsProperty().addListener((obs, oldVal, newVal) -&gt; syncwordPointsProperty(newVal));</span>
<span class="nc" id="L53">        levelModel.wordMultiProperty().addListener((obs, oldVal, newVal) -&gt; syncwordMultiProperty(newVal));</span>
<span class="nc" id="L54">        levelModel.getPlayersTotalPoints().addListener((obs, oldVal, newVal) -&gt; syncTotalScoreProperty(newVal));</span>

<span class="nc" id="L56">        levelModel.getCurrentPlays().addListener((obs, oldVal, newVal) -&gt; syncPlaysCount());</span>
<span class="nc" id="L57">        levelModel.getCurrentRedraws().addListener((obs, oldVal, newVal) -&gt; syncRedrawsCount());</span>
<span class="nc" id="L58">    }</span>

    private void syncPlaysCount(){
<span class="nc" id="L61">        playsLeftLabel.setText(String.valueOf(levelModel.getCurrentPlays().get())); // TODO: sync plays left to model so its synced in sidebar. same with redraws left count.</span>
<span class="nc" id="L62">    }</span>

    private void syncRedrawsCount(){
<span class="nc" id="L65">        redrawsLeftLabel.setText(String.valueOf(levelModel.getCurrentRedraws().get()));</span>
<span class="nc" id="L66">    }</span>

    /**
     * raw points label to be multiplied by multiplier.
     * @return label.
     */
    public Label getRawPointsLabel(){
<span class="nc" id="L73">        return this.rawPoints;</span>
    }

    /**
     * current score label.
     * @return label.
     */
    public Label getCurrentScoreLabel(){
<span class="nc" id="L81">        return this.currentScoreLabel;</span>
    }

    /**
     * word score multiplier label.
     * @return label.
     */
    public Label getmultiplierLabel(){
<span class="nc" id="L89">        return this.multiplier;</span>
    }

    /**
     * initial sync of properties when scene starts.
     */
    public void sync(){
<span class="nc" id="L96">        scoreToBeatLabel.setText(String.format(&quot;%s&quot;, levelModel.getLevelRequirement()));</span>
<span class="nc" id="L97">        syncwordPointsProperty(levelModel.wordPointsProperty().get());</span>
<span class="nc" id="L98">        syncwordMultiProperty(levelModel.wordMultiProperty().get());</span>
<span class="nc" id="L99">        syncTotalScoreProperty(levelModel.getPlayersTotalPoints().get());</span>
<span class="nc" id="L100">        syncPlaysCount();</span>
<span class="nc" id="L101">        syncRedrawsCount();</span>
<span class="nc" id="L102">    }</span>

    private void syncwordMultiProperty(Number newVal)
    {
<span class="nc" id="L106">        this.multiplier.setText(String.format(&quot;%s&quot;, newVal));</span>
<span class="nc" id="L107">    }</span>

    private void syncwordPointsProperty(Number newVal)
    {
<span class="nc" id="L111">        this.rawPoints.setText(String.format(&quot;%s&quot;, newVal));</span>
<span class="nc" id="L112">    }</span>

    private void syncTotalScoreProperty(Number newVal)
    {
<span class="nc" id="L116">        this.currentScoreLabel.setText(String.format(&quot;%s&quot;, newVal));</span>
<span class="nc" id="L117">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>